---
title: ç¼–ç¨‹é€šç”¨æ¦‚å¿µ
author: MaxCosmos
createTime: 2024/07/07 00:00:00
permalink: /study-beginner/3/
---

## ä¸å¯å˜å˜é‡å’Œå¯å˜å˜é‡

åœ¨ `rust` ä¸­å£°æ˜Žä¸€ä¸ªå˜é‡æ˜¯é€šè¿‡ `let` æ¥å£°æ˜Žçš„ã€‚ä½†æ˜¯ä¸€ä¸ªå˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚ä¹Ÿå°±æ˜¯åŽé¢æ— æ³•ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ã€‚å¦‚æžœæƒ³å£°æ˜Žä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œå¿…é¡»åŠ  `mut` å…³é”®å­—ã€‚

```rust
fn main() {
    let x = 5;
	println!("x = {}", x);
	x = 6;
	println!("x = {}", x);
}


error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:4:2
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: consider making this binding mutable: `mut x`
3 |     println!("x = {}", x);
4 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable
```

å¦‚æžœæˆ‘ä»¬ä¿®æ”¹äº†ä¸å¯å˜å˜é‡ï¼Œç¼–è¯‘çš„æ—¶å€™å°±ä¼šæç¤º `cannot assign twice to immutable variable x` ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨ä¹Ÿä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œéœ€è¦ä½¿ç”¨ `mut` æ¥å£°æ˜Žå˜é‡ã€‚ 

## å¸¸é‡

å¸¸é‡å’Œä¸å¯å˜çš„å˜é‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¸¸é‡å£°æ˜Žéœ€è¦ç”¨ `const` ï¼Œå¹¶ä¸”å¿…é¡»è¦æ ‡æ³¨å€¼å¾—ç±»åž‹ã€‚Rust å¸¸é‡çš„å‘½åçº¦å®šæ˜¯å…¨éƒ¨å­—æ¯éƒ½ä½¿ç”¨å¤§å†™ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚

```rust
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

## é®è”½

Rust è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šå¾—åœ°æ–¹æ˜¯å…è®¸å˜é‡è¿›è¡Œé®è”½ã€‚ä¹Ÿå°±æ˜¯å…è®¸å±€éƒ¨å˜é‡åœ¨å±€éƒ¨å¾—èŒƒå›´å†…é‡æ–°è¢«å®šä¹‰ï¼Œä½†æ˜¯ä¸ä¼šå½±å“å¤–éƒ¨çš„å˜é‡å€¼ã€‚

```rust
fn main() {
    let x = 5;
	println!("x = {}", x);
	
	{
		let x = 6;
		println!("x = {}", x);
	}
	
	println!("x = {}", x);
}

x = 5
x = 6
x = 5
```

å¦‚ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨å¤–éƒ¨å£°æ˜Žäº† x ä¸º 5ï¼Œåˆ°äº†å±€éƒ¨çš„æ—¶å€™ï¼ŒæŠŠ x é®è”½äº†å˜æˆ 6ï¼Œä½†æ˜¯ä»–ä¸ä¼šå½±å“å¤–éƒ¨çš„ xã€‚å› æ­¤å¤–éƒ¨çš„ xè¿˜æ˜¯ 5ã€‚

### é®è”½å’Œ mut çš„åŒºåˆ«

é®è”½æ˜¯é‡æ–°ç»™å˜é‡è®¾ç½®ç±»åž‹å’Œå€¼ã€‚è€Œ mut åˆ™æ˜¯åœ¨å½“å‰å˜é‡çš„ç±»åž‹ä¸Šä¿®æ”¹å€¼ã€‚æ¯”å¦‚ï¼š

```rust
let spaces = "   ";
let spaces = spaces.len();
```

ä¸€å¼€å§‹ `spaces` çš„å€¼æ˜¯ç©ºæ ¼ï¼Œç±»åž‹æ˜¯å­—ç¬¦ç±»åž‹ï¼Œè€Œé®è”½åŽç±»åž‹å˜æˆäº†æ•´æ•°ç±»åž‹ï¼Œå€¼ä¹Ÿä»Žç©ºæ ¼ä¿®æ”¹æˆç©ºæ ¼çš„é•¿åº¦ã€‚

```rust
let mut spaces = "   ";
spaces = spaces.len();

error[E0308]: mismatched types
 --> src/main.rs:3:11
  |
2 |     let mut spaces = "   ";
  |                      ----- expected due to this value
3 |     spaces = spaces.len();
  |              ^^^^^^^^^^^^ expected `&str`, found `usize`
```

å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ `mut` ç¼–è¯‘çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚`mismatched types` æç¤ºä¸åŒ¹é…ç±»åž‹ã€‚åŽŸæœ¬äººå®¶æ˜¯å­—ç¬¦ç±»åž‹ï¼Œä½ éžè¦ç»™ä»–ä¸€ä¸ªæ•´æ•°ç±»åž‹ï¼Œé‚£è‚¯å®šæ˜¯ä¸å¯¹çš„ï¼

## æ•°æ®ç±»åž‹

rust æ˜¯ä¸€ä¸ªé™æ€ç±»åž‹è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¼–è¯‘çš„æ—¶å€™å°±è¦çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»åž‹ã€‚

### æ ‡é‡ç±»åž‹

**æ ‡é‡**ï¼ˆ scalar ï¼‰ç±»åž‹è¡¨ç¤ºå•ä¸ªå€¼ã€‚Rust æœ‰ 4 ä¸ªåŸºæœ¬çš„æ ‡é‡ç±»åž‹ï¼šæ•´åž‹ã€æµ®ç‚¹åž‹ã€å¸ƒå°”åž‹å’Œå­—ç¬¦ã€‚

1. æ•´æ•°ç±»åž‹

   **æ•´æ•°**ï¼ˆ*integer*ï¼‰æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚

   | é•¿åº¦   | æœ‰ç¬¦å·ç±»åž‹ | æ— ç¬¦å·ç±»åž‹ |
   | ------ | ---------- | ---------- |
   | 8 ä½   | i8         | u8         |
   | 16 ä½  | i16        | u16        |
   | 32 ä½  | i32        | u32        |
   | 64 ä½  | i64        | u64        |
   | 128 ä½ | i128       | u128       |
   | arch   | isize      | usize      |

   > `isize` å’Œ `usize` ç±»åž‹å–å†³äºŽç¨‹åºè¿è¡Œçš„è®¡ç®—æœºä½“ç³»ç»“æž„ï¼Œåœ¨è¡¨ä¸­è¡¨ç¤ºä¸º arch ï¼šè‹¥ä½¿ç”¨ 64 ä½æž¶æž„ç³»ç»Ÿåˆ™ä¸º 64 ä½ï¼Œè‹¥ä½¿ç”¨ 32 ä½æž¶æž„ç³»ç»Ÿåˆ™ä¸º 32 ä½ã€‚

   | æ•°å­—å­—é¢é‡         | ç¤ºä¾‹        |
   | ------------------ | ----------- |
   | åè¿›åˆ¶             | 98_222      |
   | åå…­è¿›åˆ¶           | 0xff        |
   | å…«è¿›åˆ¶             | 0o77        |
   | äºŒè¿›åˆ¶             | 0b1111_0000 |
   | å­—èŠ‚ (ä»…é™äºŽ `u8`) | b'A'        |

   rusté»˜è®¤ç±»åž‹æ˜¯ `i32`ã€‚`isize` å’Œ `usize` çš„ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯ç”¨ä½œæŸäº›é›†åˆçš„ç´¢å¼•ã€‚

   > æ•´æ•°æº¢å‡º
   > TODO

2. æµ®ç‚¹ç±»åž‹

   **æµ®ç‚¹æ•°**ï¼ˆ*floating-point number*ï¼‰æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ï¼Œåœ¨ Rust ä¸­æµ®ç‚¹ç±»åž‹ï¼ˆç®€ç§°æµ®ç‚¹åž‹ï¼‰æ•°å­—ä¹Ÿæœ‰ä¸¤ç§åŸºæœ¬ç±»åž‹ã€‚Rust çš„æµ®ç‚¹åž‹æ˜¯ `f32` ï¼ˆ å•ç²¾åº¦æµ®ç‚¹åž‹ ï¼‰å’Œ `f64` ï¼ˆåŒç²¾åº¦æµ®ç‚¹åž‹ï¼‰ï¼Œå®ƒä»¬çš„å¤§å°åˆ†åˆ«ä¸º 32 ä½å’Œ 64 ä½ã€‚é»˜è®¤æµ®ç‚¹ç±»åž‹æ˜¯ `f64`ï¼Œå› ä¸ºåœ¨çŽ°ä»£çš„ CPU ä¸­å®ƒçš„é€Ÿåº¦ä¸Ž `f32` çš„å‡ ä¹Žç›¸åŒï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚æ‰€æœ‰æµ®ç‚¹åž‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

3. æ•°å­—è¿ç®—

   Rust çš„æ‰€æœ‰æ•°å­—ç±»åž‹éƒ½æ”¯æŒåŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–æ¨¡è¿ç®—ã€‚æ•´æ•°é™¤æ³•ä¼šå‘ä¸‹å–æ•´ã€‚

   ```rust
   fn main() {
       // addition
       let sum = 5 + 10;
   
       // subtraction
       let difference = 95.5 - 4.3;
   
       // multiplication
       let product = 4 * 30;
   
       // division
       let quotient = 56.7 / 32.2;
       let floored = 2 / 3; // Results in 0
   
       // remainder
       let remainder = 43 % 5;
   }
   ```

   > [Rust æä¾›çš„æ‰€æœ‰è¿ç®—ç¬¦çš„åˆ—è¡¨](https://rustwiki.org/zh-CN/book/appendix-02-operators.html)

4. å¸ƒå°”ç±»åž‹

   Rust ä¸­çš„å¸ƒå°”ç±»åž‹ä¹Ÿæœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ã€‚

5. å­—ç¬¦ç±»åž‹

   Rust çš„ `char`ï¼ˆå­—ç¬¦ï¼‰ç±»åž‹æ˜¯è¯¥è¯­è¨€æœ€åŸºæœ¬çš„å­—æ¯ç±»åž‹ã€‚

   ```rust
   fn main() {
       let c = 'z';
       let z = 'â„¤';
       let heart_eyed_cat = 'ðŸ˜»';
   }
   ```

   > `char` å­—é¢é‡é‡‡ç”¨å•å¼•å·æ‹¬ã€‚å­—ç¬¦ä¸²å­—é¢é‡æ˜¯ç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚Rust çš„å­—ç¬¦ç±»åž‹å¤§å°ä¸º 4 ä¸ªå­—èŠ‚ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª Unicode æ ‡é‡å€¼ã€‚

### å¤åˆç±»åž‹

**å¤åˆç±»åž‹**ï¼ˆ*compound type*ï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»åž‹ã€‚Rust æœ‰ä¸¤ç§åŸºæœ¬çš„å¤åˆç±»åž‹ï¼šå…ƒç»„ï¼ˆ tuple ï¼‰å’Œæ•°ç»„ï¼ˆ array ï¼‰ã€‚

1. å…ƒç»„ç±»åž‹

   å…ƒç»„ä¸­æ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ä»»æ„ä¸€ä¸ªç±»åž‹ã€‚å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œåªè¦å£°æ˜ŽåŽå°±æ— æ³•æ”¹å˜ã€‚

   ```rust
   fn main() {
       let tup: (i32, f64, u8) = (500, 6.4, 1);
   }
   ```

   è®¿é—®å…ƒç»„çš„æ—¶å€™å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼ï¼šè§£æž„æˆ–è€…ä½¿ç”¨ç´¢å¼•`.`ã€‚

   ```rust
   // è§£æž„
   fn main() {
       let tup = (500, 6.4, 1);
   
       let (x, y, z) = tup;
   
       println!("The value of y is: {}", y);
   }
   
   // ä½¿ç”¨ç´¢å¼• .
   fn main() {
       let x: (i32, f64, u8) = (500, 6.4, 1);
   
       let five_hundred = x.0;
   
       let six_point_four = x.1;
   
       let one = x.2;
   }
   ```

2. æ•°ç»„ç±»åž‹

   ä¸Žå…ƒç»„ä¸åŒï¼Œæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ å¿…é¡»æ˜¯ç›¸åŒçš„ç±»åž‹ã€‚

   ```rust
   fn main() {
   	// åˆå§‹åŒ–æ•°ç»„
       let a = [1, 2, 3, 4, 5];
       // æŒ‡å®šå…ƒç´ ç±»åž‹ å¹¶ä¸”é•¿åº¦æ˜¯5
       let b: [i32; 5] = [1, 2, 3, 4, 5];
       // åˆå§‹åŒ–é•¿åº¦ä¸º5ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯3çš„æ•°ç»„
       let a = [3; 5];
   }
   ```

   è®¿é—®æ•°ç»„ä½¿ç”¨ç´¢å¼•è®¿é—®ã€‚

   ```rust
   fn main() {
       let a = [1, 2, 3, 4, 5];
   
       let first = a[0];
       let second = a[1];
   }
   ```

   æ•°ç»„ä¸‹è¡¨è¶Šç•Œï¼Œå¦‚æžœæ˜¯è¿è¡Œæ—¶è¶Šç•Œï¼Œæ˜¯åªèƒ½åœ¨è¿è¡Œæ—¶æ£€æµ‹å‡ºæ¥çš„ï¼Œç¼–è¯‘çš„æ—¶å€™æ˜¯æ— æ³•æ£€æµ‹çš„ã€‚

## å‡½æ•°

1. ä½¿ç”¨å…³é”®å­— `fn` ï¼›
2. `main` æ˜¯ä¸»å‡½æ•°ï¼Œç¨‹åºçš„å…¥å£ï¼›
3. å‡½æ•°å’Œå˜é‡åä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ï¼ˆ*snake case*ï¼Œç›´è¯‘ä¸ºè›‡å½¢å‘½åæ³•ï¼‰è§„èŒƒé£Žæ ¼ï¼›
4. è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°çš„åŽé¢æˆ–è€…å‰é¢ï¼›
5. å®šä¹‰å‡½æ•°çš„å‚æ•°æ—¶ï¼Œå¿…é¡»æŒ‡å®šå‚æ•°ç±»åž‹ã€‚

```rust
fn main() {
    print_labeled_measurement(5, 'h');
}

fn print_labeled_measurement(value: i32, unit_label: char) {
    println!("The measurement is: {}{}", value, unit_label);
}
```

### è¯­å¥å’Œè¡¨è¾¾å¼

è¯­å¥æ˜¯æ²¡æœ‰è¿”å›žå€¼çš„ã€‚

```rust
fn main() {
	// æ˜¯ä¸€ä¸ªè¯­å¥
    let y = 6;
    // è¯­å¥æ²¡æœ‰è¿”å›žå€¼ï¼Œæ‰€ä»¥ä¸èƒ½æŠŠè¯­å¥èµ‹å€¼ç»™x
    let x = (let y = 6);
}
```

è¡¨è¾¾å¼æ˜¯æœ‰è¿”å›žå€¼çš„ï¼Œè¡¨è¾¾å¼æ˜¯è¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œè¡¨è¾¾å¼çš„æœ€åŽä¸€è¡Œæ²¡æœ‰åˆ†å·ã€‚

```rust
fn main() {
	// {} ä¸­æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼
    let y = {
        let x = 3;
        x + 1
    };

    println!("The value of y is: {}", y);
}

```

### å¸¦æœ‰è¿”å›žå€¼çš„å‡½æ•°

å‡½æ•°å¯ä»¥å‘è°ƒç”¨å®ƒçš„ä»£ç è¿”å›žå€¼ã€‚æˆ‘ä»¬å¹¶ä¸å¯¹è¿”å›žå€¼å‘½åï¼Œä½†è¦åœ¨ç®­å¤´ï¼ˆ`->`ï¼‰åŽå£°æ˜Žå®ƒçš„ç±»åž‹ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°çš„è¿”å›žå€¼ç­‰åŒäºŽå‡½æ•°ä½“æœ€åŽä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ä½¿ç”¨ `return` å…³é”®å­—å’ŒæŒ‡å®šå€¼ï¼Œå¯ä»¥ä»Žå‡½æ•°ä¸­æå‰è¿”å›žï¼›ä½†å¤§éƒ¨åˆ†å‡½æ•°éšå¼è¿”å›žæœ€åŽä¸€ä¸ªè¡¨è¾¾å¼ã€‚

```rust
fn five() -> i32 {
    5
}

fn main() {
    let x = five();

    println!("The value of x is: {}", x);
}
```

## æ³¨é‡Š

```rust
// è¡¨ç¤ºä¸€ä¸ªæ³¨é‡Š
```

## æŽ§åˆ¶æµ

### ifè¡¨è¾¾å¼

```rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

åœ¨ `let` è¯­å¥ä¸­ä½¿ç”¨ `if`

```rust
fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("The value of number is: {}", number);
}
```

æ„æ€å‘¢ï¼Œå°±æ˜¯å¦‚æžœ `condition` æ˜¯ `true`ï¼Œé‚£ä¹ˆ `number` å°±ç­‰äºŽ 5ï¼Œåä¹‹ä¸º 6ã€‚å¤§æ‹¬å·ä¸­æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å¹¶ä¸”åˆ†æ”¯è¡¨è¾¾å¼è¿”å›žçš„ç±»åž‹ä¹Ÿè¦ä¸€è‡´ã€‚

### å¾ªçŽ¯

Rust æœ‰ä¸‰ç§å¾ªçŽ¯ï¼š`loop`ã€`while` å’Œ `for`ã€‚

1. loop

   ```rust
   fn main() {
       loop {
           println!("again!");
       }
   }
   ```

   å‘Šè¯‰æŸä¸€æ®µä»£ç éœ€è¦é‡å¤æ‰§è¡Œã€‚ä¸Žå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œ`break` å¯ä»¥è·³å‡ºå¾ªçŽ¯ï¼Œ`continue` åˆ™æ˜¯ç»§ç»­ä¸‹ä¸€ä¸ªå¾ªçŽ¯ã€‚

   `loop` å¯ä»¥æŽ¥å—è¿”å›žã€‚

   ```rust
   fn main() {
       let mut counter = 0;
   
       let result = loop {
           counter += 1;
   
           if counter == 10 {
               break counter * 2;
           }
       };
   
       println!("The result is {}", result);
   }
   ```

   åœ¨å¾ªçŽ¯ç»“æŸæ—¶ï¼Œ `result` æŽ¥å—åˆ°äº† `counter * 2` çš„å€¼ã€‚

2. while

   å’Œå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œæ¡ä»¶ä¸ºçœŸæ—¶å¾ªçŽ¯ã€‚

   ```rust
   fn main() {
       let mut number = 3;
   
       while number != 0 {
           println!("{}!", number);
   
           number -= 1;
       }
   
       println!("LIFTOFF!!!");
   }
   ```

3. for

   éåŽ†æ•°ç»„

   ```rust
   fn main() {
       let a = [10, 20, 30, 40, 50];
   
       for element in a {
           println!("the value is: {}", element);
       }
   }
   ```

   éåŽ†æ•°å­—

   ```rust
   fn main() {
       for number in 1..4 {
           println!("{}!", number);
       }
       println!("LIFTOFF!!!");
   }
   ```

   >`rev` å¯ä»¥åè½¬åŒºé—´ (range)
   >
   >```rust
   >fn main() {
   >    for number in (1..4).rev() {
   >        println!("{}!", number);
   >    }
   >    println!("LIFTOFF!!!");
   >}
   >```
